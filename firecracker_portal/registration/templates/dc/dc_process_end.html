{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>DC Process Application</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
  </head>
  <body>
    <div class="container mt-5">
      <!-- Header -->
      <h2 class="mb-4">
        {{ role }} Review for: {{ application.stall_name }}
        {% if application.customer_id %}
          (ID: {{ application.customer_id }})
        {% endif %}
      </h2>

      <!-- Application Details -->
      <div class="card mb-4">
        <div class="card-body">
          <p><strong>Location:</strong> {{ application.location }}</p>
          <p><strong>Description:</strong> {{ application.description }}</p>
          <p><strong>Submitted by:</strong> {{ application.user.email }}</p>
          <p><strong>Submitted At:</strong> {{ application.submitted_at|date:"d M Y, h:i A" }}</p>
        </div>
      </div>

      <!-- Summary Table -->
      <div class="card mb-4">
        <div class="card-header">Application Summary</div>
        <div class="card-body">
          <table class="table table-bordered table-striped">
            <thead class="table-light">
              <tr>
                <th>Reviewer</th>
                <th>Status</th>
                <th>Approval Time</th>
                <th>Document</th>
              </tr>
            </thead>
            <tbody>
              <!-- User -->
               <tr>
                <td>User</td>
                <td><span class="badge bg-info text-dark">Submitted</span></td>
                <td>{{ application.submitted_at|date:"d M Y, h:i A" }}</td>
                <td>
                  {% if application.document %}
                    <a href="{{ application.document.url }}" target="_blank" class="btn btn-sm btn-secondary">
                      <i class="fas fa-file-pdf"></i> View User Document
                    </a>
                  {% else %}-{% endif %}
                </td>
              </tr>

              <!-- HOD Fire -->
                <tr>
                <td>HOD Fire</td>
                <td>
                    <span class="badge 
                    {% if application.hod_fire_status == 'Accepted' %}bg-success
                    {% elif application.hod_fire_status == 'Rejected' %}bg-danger
                    {% else %}bg-warning text-dark{% endif %}">
                    {{ application.hod_fire_status }}
                    </span>
                </td>
                <td>
                    {% if application.hod_fire_approved_at %}
                    {{ application.hod_fire_approved_at|date:"d M Y, h:i A" }}
                    {% else %}
                    -
                    {% endif %}
                </td>
                <td>
                    {% if application.hod_fire_approval_doc %}
                    <a href="{{ application.hod_fire_approval_doc.url }}" target="_blank" class="btn btn-sm btn-danger">
                        <i class="fas fa-file-pdf"></i> View Fire NOC
                    </a>
                    {% endif %}
                </td>
                </tr>

              <!-- HOD Red Cross -->
                <tr>
                <td>HOD Red Cross</td>
                <td>
                  <span class="badge 
                    {% if application.hod_redcross_status == 'Accepted' %}bg-success
                    {% elif application.hod_redcross_status == 'Rejected' %}bg-danger
                    {% else %}bg-warning text-dark{% endif %}">
                    {{ application.hod_redcross_status }}
                  </span>
                </td>
                <td>
                  {% if application.hod_redcross_approved_at %}
                    {{ application.hod_redcross_approved_at|date:"d M Y, h:i A" }}
                  {% else %}-{% endif %}
                </td>
                <td>
                  {% if application.hod_redcross_approval_doc %}
                    <a href="{{ application.hod_redcross_approval_doc.url }}" target="_blank" class="btn btn-sm btn-warning">
                      <i class="fas fa-file-pdf"></i> View Red Cross NOC
                    </a>
                  {% else %}-{% endif %}
                </td>
              </tr>

              <!-- HOD Police -->
                <tr>
                <td>HOD Police</td>
                <td>
                  <span class="badge 
                    {% if application.hod_police_status == 'Accepted' %}bg-success
                    {% elif application.hod_police_status == 'Rejected' %}bg-danger
                    {% else %}bg-warning text-dark{% endif %}">
                    {{ application.hod_police_status }}
                  </span>
                </td>
                <td>
                  {% if application.hod_police_approved_at %}
                    {{ application.hod_police_approved_at|date:"d M Y, h:i A" }}
                  {% else %}-{% endif %}
                </td>
                <td>
                  {% if application.hod_police_approval_doc %}
                    <a href="{{ application.hod_police_approval_doc.url }}" target="_blank" class="btn btn-sm btn-primary">
                      <i class="fas fa-file-pdf"></i> View Police NOC
                    </a>
                  {% else %}-{% endif %}
                </td>
              </tr>

              <!-- DC -->
              <tr>
                <td>District Commissioner</td>
                <td>
                  <span class="badge 
                    {% if application.status == 'Accepted' %}bg-success
                    {% elif application.status == 'Rejected' %}bg-danger
                    {% else %}bg-warning text-dark{% endif %}">
                    {{ application.status }}
                  </span>
                </td>
                <td>
                  {% if application.dc_approved_at %}
                    {{ application.dc_approved_at|date:"d M Y, h:i A" }}
                  {% else %}-{% endif %}
                </td>
                <td>
                  {% if application.dc_approval_doc %}
                    <a href="{{ application.dc_approval_doc.url }}" target="_blank" class="btn btn-sm btn-success">
                      <i class="fas fa-file-pdf"></i> View DC Document
                    </a>
                  {% else %}-{% endif %}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Final Approval Form -->s